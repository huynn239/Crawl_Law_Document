{
  "name": "TVPL Crawler - Docker",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [{"field": "cronExpression", "expression": "0 2 * * *"}]
        }
      },
      "name": "Schedule",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "command": "cd /workspace && python -m tvpl_crawler links-basic -u \"https://thuvienphapluat.vn/page/tim-van-ban.aspx?keyword=&area=0&match=True&type=0&lan=1&status=-1&org=-1&field=-1&year=2025&page={page}\" -o /data/links.json --start-page 1 --end-page 5"
      },
      "name": "Crawl Links",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [450, 300]
    },
    {
      "parameters": {
        "command": "cd /workspace && python crawl_data_fast.py /data/links.json /data/result.json"
      },
      "name": "Crawl Docs",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [650, 300]
    },
    {
      "parameters": {
        "command": "cd /workspace && python supabase_transform.py /data/result.json"
      },
      "name": "Transform",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [850, 300]
    },
    {
      "parameters": {
        "command": "cd /workspace && python import_full_supabase.py /data/result_supabase.json"
      },
      "name": "Import",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [1050, 300]
    }
  ],
  "connections": {
    "Schedule": {"main": [[{"node": "Crawl Links", "type": "main", "index": 0}]]},
    "Crawl Links": {"main": [[{"node": "Crawl Docs", "type": "main", "index": 0}]]},
    "Crawl Docs": {"main": [[{"node": "Transform", "type": "main", "index": 0}]]},
    "Transform": {"main": [[{"node": "Import", "type": "main", "index": 0}]]}
  }
}
